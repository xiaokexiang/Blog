---
title: "Linux下cron定时器"
date: 2021-01-07T14:21:38+08:00
weight: 3
tags: ["linux "]
categories: [
  "linux"
]
---

### crontab命令

> `crontab`是linux下的定时任务服务，是基于`cron表达式`实现定时任务操作。

<!--more-->
```shell
# 查看定时器状态、开启、关闭
service crond status/start/stop

# 查看定时任务列表
crontab -l

# 编辑定时任务
crontab -e

# 删除定时任务
crontab -r
```

### cron表达式语法

#### 基本格式

|       符号       |        作用        |        取值范围        |
| :--------------: | :----------------: | :--------------------: |
| 第一个<b>`*`</b> | 一小时中的第几分钟 |          0-59          |
| 第二个<b>`*`</b> |  一天中的第几小时  |          0-23          |
| 第三个<b>`*`</b> |  一个月中的第几天  |          1-31          |
| 第四个<b>`*`</b> |   一年中的第几月   |          1-12          |
| 第五个<b>`*`</b> |   一周中的星期几   | 0-7`（0&7都表示周日）` |

#### 特殊符号

|     符号     |                             作用                             |
| :----------: | :----------------------------------------------------------: |
|  <b>`*`</b>  |      代表任何时间，比如第一个*就代表一小时内的每分钟。       |
|  <b>`,`</b>  | 代表不连续的时间，比如`0 1,3,5 * * *`表示每天的1点、3点、5点执行。 |
|  <b>`-`</b>  | 代表连续的时间，比如`0 1-3 * * *`表示每天的1点、2点、3点执行。 |
| <b>`*/n`</b> | 代表每隔多久执行一次，日过`*/10 * * * *`表示每隔10分钟执行一次。 |

#### cron表达式示例

|             需求              |     表达式     |
| :---------------------------: | :------------: |
|      每天的10点30分执行       | `30 10 * * *`  |
|     每周一的20点10分执行      | `10 20 * * 1`  |
|     每个月的1号、10号执行     | `* * 1,10 * *` |
|   每个月的1号、2号、3号执行   | `* * 1-3 * *`  |
| 每天的10点，每隔5分钟执行一次 | `*/5 10 * * *` |

#### crontab使用示例

```shell
# 编辑定时任务
crontab -e
# 每隔一分钟写入hello到cron.txt文件中
*/1 * * * * echo 'hello' >> /opt/software/cron.txt
# 查看文件
tail -f /opt/software/cron.txt
```

> ![](https://image.leejay.top/FuIQOERPfkcxtA57UfN_uTm8dhYj)

